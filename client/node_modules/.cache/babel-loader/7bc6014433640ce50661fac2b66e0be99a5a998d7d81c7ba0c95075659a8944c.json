{"ast":null,"code":"import React,{Fragment,useEffect,useState}from\"react\";import Moment from\"react-moment\";import Spinner from\"../../layout/Spinner\";import{getAttendance,getCourses}from\"../../../actions/student\";import{Link}from\"react-router-dom\";import{connect}from\"react-redux\";import Table from\"./Table\";import Sidebar from\"./Sidebar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const StudentAttendance=_ref=>{let{getCourses,getAttendance,student:{attendance,courses},auth:{user},match}=_ref;useEffect(()=>{getAttendance(match.params.course);},[getAttendance,match.params.course]);useEffect(()=>{getCourses();},[getCourses]);let name;courses.map(record=>{console.log(\"inside filter\");if(record.course===match.params.course)name=record.faculty;});console.log(name);let present=0;let total=0;let last=attendance[attendance.length-1];console.log(attendance);if(attendance)console.log(typeof last);if(attendance.length>0){attendance.map(record=>{total++;if(record.status===\"Present\")present++;});}let percent=Math.ceil(present*100/total);return attendance.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"grid-container\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"header__logo\",children:\"Attendance DashBoard\"})}),/*#__PURE__*/_jsx(Sidebar,{user:user}),/*#__PURE__*/_jsx(\"main\",{className:\"main\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{style:{paddingLeft:\"20px\",paddingTop:\"30px\"},children:[match.params.course,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{color:\"white\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"black\"},children:\"Average Attendance Record\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"c100 p\".concat(percent,\" big\"),children:[/*#__PURE__*/_jsxs(\"span\",{children:[percent,\"%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"slice\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fill\"})]})]})]}),percent>=75?/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{backgroundColor:\"green\",color:\"white\"},children:[/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsx(\"u\",{children:\"Eligibility (cut-off 75%):\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\" Eligible \"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{backgroundColor:\"red\",color:\"white\"},children:[/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsx(\"u\",{children:\"Eligibility (cut-off 75%)\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\" Not Eligible \"})]})]}),/*#__PURE__*/_jsxs(\"table\",{id:\"attendance-table\",className:\"table table-bordered table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-dark heading\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"student-table-header\",children:\"S.No\"}),/*#__PURE__*/_jsx(\"th\",{className:\"student-table-header\",children:\"Student Roll\"}),/*#__PURE__*/_jsx(\"th\",{className:\"student-table-header\",children:\"Student Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"student-table-header\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"student-table-header\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{id:\"myTable\",children:attendance.map((record,index)=>/*#__PURE__*/_jsx(Table,{record:record,index:index+1}))})]})]})}),/*#__PURE__*/_jsxs(\"footer\",{className:\"footer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"footer__copyright\",children:\"\\xA9 IIITDMJ\"}),/*#__PURE__*/_jsx(\"div\",{className:\"footer__signature\",children:\"The Ultimate Attendance Management Tool\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid-container\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"header__logo\",children:\"Attendance DashBoard\"})}),/*#__PURE__*/_jsx(Sidebar,{user:user}),/*#__PURE__*/_jsxs(\"main\",{className:\"main\",children:[/*#__PURE__*/_jsxs(\"h1\",{style:{paddingLeft:\"20px\",paddingTop:\"30px\"},children:[match.params.course,\" - \",name]}),/*#__PURE__*/_jsxs(\"h1\",{style:{paddingLeft:\"20px\",paddingTop:\"25px\"},children:[\"No records created for \",match.params.course,\" yet.\"]})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"footer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"footer__copyright\",children:\"\\xA9 IIITDMJ\"}),/*#__PURE__*/_jsx(\"div\",{className:\"footer__signature\",children:\"The Ultimate Attendance Management Tool\"})]})]});};const mapStateToProps=state=>({student:state.student,auth:state.auth});export default connect(mapStateToProps,{getAttendance,getCourses})(StudentAttendance);","map":{"version":3,"names":["React","Fragment","useEffect","useState","Moment","Spinner","getAttendance","getCourses","Link","connect","Table","Sidebar","jsx","_jsx","jsxs","_jsxs","StudentAttendance","_ref","student","attendance","courses","auth","user","match","params","course","name","map","record","console","log","faculty","present","total","last","length","status","percent","Math","ceil","className","children","style","paddingLeft","paddingTop","color","concat","backgroundColor","id","index","mapStateToProps","state"],"sources":["E:/attendencemgmt/Attendance-Management-SQL/client/src/components/dashboard/student/Attendance.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Moment from \"react-moment\";\r\nimport Spinner from \"../../layout/Spinner\";\r\nimport { getAttendance, getCourses } from \"../../../actions/student\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport Table from \"./Table\";\r\nimport Sidebar from \"./Sidebar\";\r\n\r\nconst StudentAttendance = ({\r\n  getCourses,\r\n  getAttendance,\r\n  student: { attendance, courses },\r\n  auth: { user },\r\n  match,\r\n}) => {\r\n  useEffect(() => {\r\n    getAttendance(match.params.course);\r\n  }, [getAttendance, match.params.course]);\r\n\r\n  useEffect(() => {\r\n    getCourses();\r\n  }, [getCourses]);\r\n\r\n  let name;\r\n  courses.map((record) => {\r\n    console.log(\"inside filter\");\r\n    if (record.course === match.params.course) name = record.faculty;\r\n  });\r\n  console.log(name);\r\n\r\n  let present = 0;\r\n  let total = 0;\r\n  let last = attendance[attendance.length - 1];\r\n  console.log(attendance);\r\n  if (attendance) console.log(typeof last);\r\n  if (attendance.length > 0) {\r\n    attendance.map((record) => {\r\n      total++;\r\n      if (record.status === \"Present\") present++;\r\n    });\r\n  }\r\n\r\n  let percent = Math.ceil((present * 100) / total);\r\n\r\n  return attendance.length > 0 ? (\r\n    <div className=\"grid-container\">\r\n      <header className=\"header\">\r\n        <div className=\"header__logo\">Attendance DashBoard</div>\r\n      </header>\r\n      <Sidebar user={user} />\r\n      <main className=\"main\">\r\n        <div>\r\n          <h1 style={{ paddingLeft: \"20px\", paddingTop: \"30px\" }}>\r\n            {match.params.course}{\" \"}\r\n          </h1>\r\n          <div className=\"main-cards\">\r\n            <div className=\"card\" style={{ color: \"white\" }}>\r\n              <h2 style={{ color: \"black\" }}>Average Attendance Record</h2>\r\n\r\n              <div className={`c100 p${percent} big`}>\r\n                <span>{percent}%</span>\r\n                <div className=\"slice\">\r\n                  <div className=\"bar\"></div>\r\n                  <div className=\"fill\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {percent >= 75 ? (\r\n              <div\r\n                className=\"card\"\r\n                style={{ backgroundColor: \"green\", color: \"white\" }}\r\n              >\r\n                <h4>\r\n                  <u>Eligibility (cut-off 75%):</u>\r\n                </h4>\r\n                <h1> Eligible </h1>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className=\"card\"\r\n                style={{ backgroundColor: \"red\", color: \"white\" }}\r\n              >\r\n                <h4>\r\n                  <u>Eligibility (cut-off 75%)</u>\r\n                </h4>\r\n                <h1> Not Eligible </h1>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <table\r\n            id=\"attendance-table\"\r\n            className=\"table table-bordered table-striped\"\r\n          >\r\n            <thead className=\"thead-dark heading\">\r\n              <tr>\r\n                <th className=\"student-table-header\">S.No</th>\r\n                <th className=\"student-table-header\">Student Roll</th>\r\n                <th className=\"student-table-header\">Student Name</th>\r\n                <th className=\"student-table-header\">Date</th>\r\n                <th className=\"student-table-header\">Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody id=\"myTable\">\r\n              {attendance.map((record, index) => (\r\n                <Table record={record} index={index + 1} />\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </main>\r\n      <footer className=\"footer\">\r\n        <div className=\"footer__copyright\">&copy; IIITDMJ</div>\r\n        <div className=\"footer__signature\">\r\n          The Ultimate Attendance Management Tool\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  ) : (\r\n    <div className=\"grid-container\">\r\n      <header className=\"header\">\r\n        <div className=\"header__logo\">Attendance DashBoard</div>\r\n      </header>\r\n      <Sidebar user={user} />\r\n      <main className=\"main\">\r\n        <h1 style={{ paddingLeft: \"20px\", paddingTop: \"30px\" }}>\r\n          {match.params.course} - {name}\r\n        </h1>\r\n        <h1 style={{ paddingLeft: \"20px\", paddingTop: \"25px\" }}>\r\n          No records created for {match.params.course} yet.\r\n        </h1>\r\n      </main>\r\n      <footer className=\"footer\">\r\n        <div className=\"footer__copyright\">&copy; IIITDMJ</div>\r\n        <div className=\"footer__signature\">\r\n          The Ultimate Attendance Management Tool\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nStudentAttendance.propTypes = {\r\n  getAttendance: PropTypes.func.isRequired,\r\n  getCourses: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  student: state.student,\r\n  auth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps, { getAttendance, getCourses })(\r\n  StudentAttendance\r\n);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}